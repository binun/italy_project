#!/bin/bash

# https://hub.docker.com/r/sameersbn/mysql/builds/bezzyb9ncjwpv3gnkyhwnxp/

DBNAME=mydb
TBNAME=mytbl



if grep -q PATTERN file.txt; then
    echo found
else
    echo not found
fi

if [[ "$(docker images ${image_and_tag_array[0]} | grep ${image_and_tag_array[1]} 2> /dev/null)" != "" ]]; then
    echo "Ubuntu MYSQL already exists"
else
   docker build -t mysql-ubuntu-image github.com/sameersbn/docker-mysql
   docker run --name mysql-ubuntu -d mysql-ubuntu-image
fi

declare -a sqls=(
	"create database $DBNAME;" 
	"use $DBNAME; create table $TBNAME(task_id INT(4),subject INT(4));"
	"use $DBNAME; INSERT INTO $TBNAME(task_id INT(4),subject INT(4)) VALUES (1111 , 1110);"
	"use $DBNAME; INSERT INTO $TBNAME(task_id INT(4),subject INT(4)) VALUES (2222 , 2220);"
	"use $DBNAME; INSERT INTO $TBNAME(task_id INT(4),subject INT(4)) VALUES (3333 , 3330);"
	"use $DBNAME; INSERT INTO $TBNAME(task_id INT(4),subject INT(4)) VALUES (4444 , 4440);"
	"use $DBNAME; INSERT INTO $TBNAME(task_id INT(4),subject INT(4)) VALUES (5555 , 5550);"
)

for sql in "${sqls[@]}"
do
   echo "$sql"
   docker exec -it mysql-ubuntu bash -c "mysql -u debian-sys-maint -e \"$sql\" "
done

# show databases;
# create database dbtest;
# mysql -u dbuser -pdbpass "dbname" -e "show databases"

